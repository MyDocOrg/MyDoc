<mat-toolbar class="topbar-container">
  <span class="topbar-title">
    Panel Administrativo
  </span>

  <span class="spacer"></span>

  <div class="topbar-actions">
    <!-- Botón de cambio de tema -->
    <button 
      mat-icon-button
      (click)="toggleTheme()"
      [matTooltip]="isDarkMode ? 'Cambiar a modo claro' : 'Cambiar a modo oscuro'">
      @if (isDarkMode) {
        <mat-icon>light_mode</mat-icon>
      } @else {
        <mat-icon>dark_mode</mat-icon>
      }
    </button>

    <!-- Botón de cambio de idioma -->
    <button 
      mat-icon-button
      [matMenuTriggerFor]="flags"
      [matTooltip]="'Cambiar idioma'"
      class="language-button">
      <img
        [src]="currentLanguageObj.icon"
        class="flag-icon-img"
        [alt]="currentLanguageObj.language"
      />
    </button>

    <mat-menu #flags="matMenu" class="cardWithShadow">
      @for(lang of languages; track lang.code) {
        <button mat-menu-item (click)="changeLanguage(lang)">
          <div class="d-flex align-items-center">
            <img
              [src]="lang.icon"
              class="rounded-circle object-cover m-r-8 icon-20"
              [alt]="lang.language"
            />
            <span class="mat-subtitle-1 f-s-14">{{ lang.language }}</span>
          </div>
        </button>
      }
    </mat-menu>

    <!-- Menú de usuario -->
    <button 
      mat-icon-button 
      [matMenuTriggerFor]="userMenu" 
      class="user-button"
      [matTooltip]="'Usuario'">
      <div class="user-icon-wrapper">
        <mat-icon>account_circle</mat-icon>
        <mat-icon class="dropdown-arrow">arrow_drop_down</mat-icon>
      </div>
    </button>
    
    <mat-menu #userMenu="matMenu" class="user-menu">
      <button mat-menu-item>
        <mat-icon>person</mat-icon>
        <span>Perfil</span>
      </button>
      <button mat-menu-item>
        <mat-icon>settings</mat-icon>
        <span>Ajustes</span>
      </button>
      <mat-divider></mat-divider>
      <button mat-menu-item class="logout-item" (click)="closeSession()">
        <mat-icon>logout</mat-icon>
        <span >Cerrar Sesión</span>
      </button>
    </mat-menu>
  </div>
</mat-toolbar>
